# Common questions
_templates_suffix: .p8t

# Project name
project_name:
  type: str
  help: Project Name (Pulse8 <project-name>)?
  default: Pulse8 Core Angular App
  _validate: |
    {% if " " in value %}
    {%- set msg = "Project name should be in kebab-case without spaces." -%}
    {{ raise(msg) }}
    {% endif %}

# Project ID
project_id:
  type: str
  help: Project Id (pulse8-<project-name>)?
  default: "{{ project_name|lower|replace(' ', '-') }}"
  validator: >-
    {% if not (project_id | regex_search('^[a-z0-9\-\_]+$')) %}
    Project Id must contain only lowercase letters, digits, dashes or underscores. Cannot be empty.
    {% endif %}

# Project description
project_desc:
  type: str
  help: Project Description?

# ARM Build necessary
build_for_arm:
  type: bool
  help: Do you need the Docker image to be built for arm architecture? (necessary for mac users)
  default: no

# Use keycloak
auth:
  type: bool
  help: Do you want to use keycloak for authentication?
  default: no

# Use ngrx store
store:
  type: bool
  help: Do you want to use ngrx for state management?
  default: no

# Add store examples
store_example:
  type: bool
  help: Do you want examples for the implementation of the ngrx store?
  when: "{{store}}"
  default: no

# Add normal project examples
non_store_example:
  type: bool
  help: Do you want some example implementations for a new angular project?
  when: "{{not store}}"
  default: no

add_sonar:
  type: bool
  help: Add SonarCloud scan github action ?
  default: false

sonar_project_key_suffix:
  type: str
  help: Sonar project key suffix (synpulse-group_<suffix>)
  when: "{{ add_sonar }}"
  default: "{{ project_id }}"
  validator: >-
    {% if not (sonar_project_key_suffix | regex_search('^[a-z0-9\-\_]*$')) %}
    Sonar project key suffix must contain only lowercase letters, digits, dashes or underscores.
    {% endif %}

_exclude:
  - '/.git'
  - '/package.json'
  - '/copier.yaml'
  - '/builds'
  - '/.github/workflows/template-build*'
  - '/copier-build.sh'
